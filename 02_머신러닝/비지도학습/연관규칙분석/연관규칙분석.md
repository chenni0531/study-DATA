# 연관규칙분석

> - 연관규칙 분석, 연관성 분석 Association Analysis
> - 장바구니 분석 market basket analysis

[TOC]

## 1. 연관규칙분석

**실행 가능한 패턴 발견**

- LHS: 규칙을 실행하기 위해 만족되어야 하는 조건

- RHS: 해당 조건을 만족했을 때 기대하는 결과

```
example)
사기성 신용카드와 보험의 이용과 결합되어 발생하는 구매 패턴 발견
월마트의 맥주 구매와 기저귀 구매의 연관성
```

<br>

---

<br>

## 2. 아프리오리 알고리즘

> Apriori Algorithm

- 큰 데이터베이스에서 규칙을 효율적으로 찾기 위한 방법

- 연관 규칙의 검색 공간을 축소하기 위해 선험적 믿음 이용

아프리오리 속성: 빈번한 아이템 집합의 모든 부분집합도 빈번

```
example)
{motor oil, lipstick}의 집합은 {motor oil}과 {lipstick}이 모두 빈번하게 발생해야만 빈번해질 수 있다!
```

<br>

**1. 빈발 품목 집합 Frequent Item Set 생성**

1. 최소 지지도 (최소 발생 비율) 설정
2. p개의 품목을 갖는 품목 집합 중에서 최소 지지도를 넘는 품목 찾기
3. 최소 지지도를 넘는 p+1개의 품목 집합 찾기

**2. 연관 규칙 생성**

빈발 품목 집합의 공집합을 제외한 모든 부분집합에서 최소 신뢰도를 넘는 연관규칙 찾기

<br>

---

<br>

## 3. 연관 규칙 평가 척도

### 3-1. 지지도

> support (규칙 선택의 기준, 규칙 품질 척도)

아이템 집합이나 규칙이 데이터에 발생하는 빈도

- 전체 거래 항목 중 상품 A와 상품 B를 동시에 포함하여 거래하는 비율

- A -> B 라는 연관 규칙이 얼마나 의미있는 규칙인지

![KakaoTalk_20210801_174341447](../../../../../../KakaoTalk_20210801_174341447.jpg)

<br>

### 3-2. 신뢰도

> confidence (규칙 선택의 기준, 규칙 품질 척도)

아이템이나 아이템 집합 X의 존재가 아이템이나 아이템 집합 Y의 존재를 유발하는 거래의 비율 (예측 능력이나 정확도의 측정치)

- 상품 A를 포함하는 거래 중 A와 B가 동시에 거래되는 비중

- 상품 A를 구매했을 때 상품 B를 구매할 확률이 어느 정도인지

강한 규칙: 신뢰도가 1인 규칙

![KakaoTalk_20210801_174341447_01](../../../../../../KakaoTalk_20210801_174341447_01.jpg)

<br>

### 3-3. 향상도

> lift (규칙 품질 척도)

하나의 아이템이나 아이템 집합이 다른 아이템이나 다른 아이템 집합이 구매된 것을 알았다는 사실로 인해 평소 판매 비율과 비교하여 변화되는 정도

- lift = 1: A와 B 사이에 아무런 관계가 없다
- lift > 1 또는 lift < 1 : A와 B 사이에 연관성이 높다, 우연적 기회가 아니므로 해당 규칙이 중요하며 실제 연관성이 있다

![KakaoTalk_20210801_174341447_02](../../../../../../KakaoTalk_20210801_174341447_02.jpg)

<br>

---

<br>

## 4. 결과 해석

연관 규칙을 받아 세 가지 범주로 규칙을 나눈다

- 실행 가능한: 명확하고 유용한 통찰 제공 (장바구니 분석의 목표)
- 사소한: 너무 명확해서 언급할 가치가 없는 규칙
- 설명하기 어려운: 연관성이 불명확해서 정보 사용법을 알아내기 어러운 규칙 (단순 데이터에 있는 랜덤 패턴일 수 있다)