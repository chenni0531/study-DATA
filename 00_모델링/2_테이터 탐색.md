# 2_테이터 탐색

[TOC]

## 1. 탐색적 데이터 분석 (EDA)

> Exploratory Data Analysis: process of gaining relevant knowledge about a complex system

![img](https://www.insilicogen.com/blog/attach/1/1385257713.jpg)

- 데이터를 분석하기 전에 그래프나 통계적인 방법으로 자료를 직관적으로 바라보는 과정

- 데이터를 탐색하여 데이터의 특징과 구조로부터 얻은 정보를 바탕으로 통계 모형을 만드는 분석 방법
- 연구의 초기 혹은 데이터 정제(Clean Data) 이후 단계에 수행

<br>

### 1-1. 목적

- 가설 수립과 적절한 모델 및 기법의 선정 지원
- 데이터의 분포 및 값을 관찰하며 전체적인 양상과 현상 이해 (변수 간 트렌드, 패턴, 관계 등)

- 데이터 준비 단계에서 파악하지 못한 잠재적인 문제 발견
- 문제 정의 단계에서 발견하지 못한 다양한 패턴 발견

<br>

### 1-2. 구성 요소

- Data visualization
- Residual analysis
- Data transformation or re-expression
- Resistance procedures

- 데이터는 수치적인 요약과 그래프를 통해 살펴봄으로써 쉽게 이해할 수 있다.
  1. 수치적인 요약 (기술통계):
     - 평균(Mean), 중앙값(Median), 최빈값(Mode)
     - 표준편차(Standard Deviation), 분산(Variance)
     - 사분위수범위(Interquartile Range)
     - 첨도(Kurtosis), 왜도(Skewness)
  2. 그래프에 의한 요약 (Graphical methods)
     - Histogram
     - Density estimation
     - Quantile-quantile plot
     - Box plots
     - Scatter plots

## 2.4 Descriptive Statistics in R

| Statistics          | R function                     |
| ------------------- | ------------------------------ |
| Mean                | mean()                         |
| Median              | median()                       |
| Mode                | sort(x, decreasting = TRUE)[1] |
| Standard Deviation  | sd()                           |
| Variance            | var()                          |
| Correlation         | cor(), cov()                   |
| Quantiles           | quantile()                     |
| Range               | range()                        |
| Interquartile range | IQR()                          |
| 첨도(Kurtosis)      | e1071::kurtosis()              |
| 왜도(Skewness)      | e1071::skewness()              |
| Frequencies         | table(), addmargins(table())   |
| Group summary       | aggregate()                    |

## 2.5 Graphical Methods

| Plot Types        | Base R          | lattice       | ggplot-geoms     |
| ----------------- | --------------- | ------------- | ---------------- |
| Bar               | barplot()       | barchart()    | geom_bar()       |
| Histogram         | hist()          | histogram()   | geom_histogram() |
| Density           | plot(density()) | densityplot() | geom_density()   |
| Quantile-Quantile | qqnorm()        | qq()          | geom_qq()        |
| Box-Whisker       | boxplot()       | bwplot()      | geom_boxplot()   |
| Scatter           | plot()          | xyplot()      | geom_point()     |
| Line              | plot()          | xyplot()      | geom_line()      |

<br>

### 1-3. 과정

도표(plot), 그래프(graph), 요약 통계(summary statistics)등을 사용

1. 분석의 목적과 변수 확인
2. 데이터를 전체적으로 살펴보기
   - 데이터에 문제가 없는지 확인
   - head나 tail부분을 확인
   - 추가적으로 다양한 탐색(이상치, 결측치 등)
3. 데이터의 개별 속성값을 관찰
   - 각 속성 값이 예측한 범위와 분포를 갖는지 확인
   - 만약 그렇지 않다면, 이유가 무엇인지를 확인
4. 속성 간의 관계에서 패턴을 발견 (상관관계, 시각화 등)

| 데이터 분류                            | 종류            | 내용                                                         |
| -------------------------------------- | --------------- | ------------------------------------------------------------ |
| **Categorical Variable (Qualitative)** | Nominal Data    | 숫자로 표시할 수 없으나 숫자화한 데이터 (순위의 개념 없음) ex) 남자-0, 여자-1 |
|                                        | Ordinal Data    | 숫자로 표시할 수 없으나 숫자화한 데이터 (순위의 개념이 있음) ex) 소득분위 10분위 > 9 분위 > 8 분위 |
| **Numeric Variable (Quantitative)**    | Continuous Data | 셀 수 있는 연속량 데이터 ex) 키 - 166.1cm                    |
|                                        | Discrete Data   | 셀 수 있는 비연속량 데이터 ex) 자식 수 5명                   |

| 데이터 조합               | 요약 통계          | 시각화        |
| ------------------------- | ------------------ | ------------- |
| Categorical - Categorical | 교차 테이블        | 모자이크 플롯 |
| Numeric - Categorical     | 카테고리별 통계 값 | 박스 플롯     |
| Numeric - Numeric         | 상관계수           | 산점도        |

[참고자료](https://eda-ai-lab.tistory.com/13)

<br>

---

<br>

## 2. 데이터 시각화

> Data visualization = process of telling what you learned and what you want to communicate

분석 결과를 커뮤니케이션 하기 위해 연구의 마지막이자 의사결정 전 단계(Decision making)에서

회사에서 데이터를 다루는 사람들은 본인이 가지고 있는 데이터에 대한 스토리를, 보는 사람이 큰 노력을 들이지 않고도 이해할 수 있도록 스토리를 간결화하여 나타내는 능력이 중요합니다.

![img](https://miro.medium.com/max/1400/0*Qi_ovmGZ_u4UkRVT.jpg)

출처: https://infogram.com/page/data-visualization

데이터 사이언티스트들 대부분이 데이터 분석 자체에 필요한 새 지식과 신기술을 익히기에 바쁩니다. 그러나 그 신기술의 가치는 데이터 분석을 통해 나온 인사이트를 공유할 수 있을 때 발생합니다. 즉, 분석한 내용을 보여줄 도구와 방법 또한 데이터 사이언티스트로서 깊게 고민해야 하는 부분입니다.

## 개념

- 광범위하게 분산된 방대한 양의 자료를 분석해, 한 눈에 보고 이해할 수 있도록 도표나 차트 등으로 정리하는 것을 의미합니다.

## 목적

- 설득과 사실 확인을 목적으로 합니다.

## 보는 대상이 누구인가에 따라 달라지는 방식

- 직접 그래프를 더 탐색해보고 싶은 목적이 있는 대상에게는 동적인(interactive) 시각화 방식이 좋습니다.
- 더 탐색할 목적이 없고, 보고 싶은 정보가 명확한 대상에게는 정적인 그래프를 기반으로 작성한 후, 추가적인 내용이 궁금하면 대시보드로 가도록 유도하는 것이 좋습니다.

## 일반적인 시각화 방식

![img](https://miro.medium.com/max/60/1*qtWoRMUSYfwKh87CLLAWCg.png?q=20)

![img](https://miro.medium.com/max/875/1*qtWoRMUSYfwKh87CLLAWCg.png)

구글링을 하면 찾을 수 있는 일반적으로 알려진 정보 시각화 방법 표입니다. 사실 데이터 시각화 초심자로서는 표 안의 많은 단어가 낯설고, 시각화해야 할 데이터가 어느 범주에 해당하는지 조차 헷갈립니다. 그런 분들을 위해 다음 포스팅에 Jupyter notebook 기반으로 예제를 풀며 쉽게 실행하며 따라 할 수 있는 가이드라인을 업로드할 예정입니다. 기대해주세요!

데이터의 분포는 다음과 같이 살필 수 있습니다. 대표적인 몇 가지만 살펴보도록 하겠습니다.

- 범주형 : bar
- 수치형
  - 이산형 : bar
  - 연속형 : kdeplot, histogram
- 범주형 + 수치형 : boxplot, violinplot, etc
- 수치형 + 수치형 : scatter



## EDA

Exploratory Data Analysis

- Main Point
  - Data Analysis
  - Inlier/Outlier
  - Feature Engineering
    - Feature Selection
    - Dimension Reduction
    - Feature Generation
- Libraries
  - Visualization
    - matplotlib
    - bokeh:
    - seaborn (as sns)
      - heatmap
        - variable/feature 간의 correlation matrix를 그릴 때 많이 사용됨.
      - pointplot, boxplot, lmplot(=scatterplot)
    - plotly
      - dots, lines, bars, pie, ...

